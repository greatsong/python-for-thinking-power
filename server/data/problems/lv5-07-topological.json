{
  "id": "lv5-07-topological",
  "title": "ì„ ìˆ˜ ê³¼ëª© ìˆœì„œ ì •í•˜ê¸° (ìœ„ìƒ ì •ë ¬)",
  "difficulty": 5,
  "category": "graph",
  "description": "## ğŸ“š ì„ ìˆ˜ ê³¼ëª© ìˆœì„œ ì •í•˜ê¸°! (ìœ„ìƒ ì •ë ¬)\n\nê³¼ëª©ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ì„ ìˆ˜ ê³¼ëª©ì„ ë¨¼ì € ë“¤ì–´ì•¼ í•´ìš”.\n**ëª¨ë“  ì„ ìˆ˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìˆ˜ê°• ìˆœì„œ**ë¥¼ êµ¬í•´ìš”.\n\n```\nì„ ìˆ˜ ì¡°ê±´:\n- íŒŒì´ì¬ â†’ ì•Œê³ ë¦¬ì¦˜\n- íŒŒì´ì¬ â†’ ë°ì´í„°êµ¬ì¡°\n- ì•Œê³ ë¦¬ì¦˜ â†’ AI\n- ë°ì´í„°êµ¬ì¡° â†’ AI\n\nê°€ëŠ¥í•œ ìˆœì„œ: íŒŒì´ì¬ â†’ ì•Œê³ ë¦¬ì¦˜ â†’ ë°ì´í„°êµ¬ì¡° â†’ AI\në˜ëŠ”:        íŒŒì´ì¬ â†’ ë°ì´í„°êµ¬ì¡° â†’ ì•Œê³ ë¦¬ì¦˜ â†’ AI\n```\n\n### ì¹´í”(Kahn) ì•Œê³ ë¦¬ì¦˜\n1. ì§„ì…ì°¨ìˆ˜(incoming edges) ê³„ì‚°\n2. ì§„ì…ì°¨ìˆ˜ 0ì¸ ë…¸ë“œë¥¼ íì— ë„£ê¸°\n3. íì—ì„œ êº¼ë‚´ë©° ì´ì›ƒì˜ ì§„ì…ì°¨ìˆ˜ë¥¼ ì¤„ì´ê¸°\n4. ì§„ì…ì°¨ìˆ˜ 0ì´ ë˜ë©´ íì— ì¶”ê°€!\n\n---\n\n## ë¬¸ì œ\n\nnê°œ ê³¼ëª©ê³¼ ì„ ìˆ˜ ì¡°ê±´ì„ ì…ë ¥ë°›ì•„ ìœ„ìƒ ì •ë ¬ ìˆœì„œë¥¼ ì¶œë ¥í•˜ì„¸ìš”.\n(ì—¬ëŸ¬ ë‹µì´ ìˆìœ¼ë©´ ë²ˆí˜¸ ì‘ì€ ê²ƒë¶€í„°, ì‚¬ì´í´ ìˆìœ¼ë©´ CYCLE ì¶œë ¥)\n\n### ì…ë ¥\n- ì²«ì§¸ ì¤„: n m (ê³¼ëª© ìˆ˜, ì¡°ê±´ ìˆ˜)\n- ì´í›„ mì¤„: a b (aë¥¼ ë“¤ì–´ì•¼ bë¥¼ ë“¤ì„ ìˆ˜ ìˆìŒ)\n\n### ì˜ˆì‹œ\n```\nì…ë ¥:\n4 4\n1 2\n1 3\n2 4\n3 4\nì¶œë ¥: 1 2 3 4\n```",
  "starter_code": "from collections import deque\n\nn, m = map(int, input().split())\ngraph = [[] for _ in range(n+1)]\nin_degree = [0] * (n+1)\n\nfor _ in range(m):\n    a, b = map(int, input().split())\n    graph[a].append(b)\n    in_degree[b] += 1\n\n# ìœ„ìƒ ì •ë ¬ ìˆœì„œë¥¼ ì¶œë ¥í•˜ì„¸ìš” (ì‚¬ì´í´ì´ë©´ CYCLE)\n",
  "test_cases": [
    { "input": "4 4\n1 2\n1 3\n2 4\n3 4", "expected_output": "1 2 3 4", "description": "ê¸°ë³¸ ìœ„ìƒì •ë ¬" },
    { "input": "3 3\n1 2\n2 3\n3 1", "expected_output": "CYCLE", "description": "ì‚¬ì´í´ ìˆìŒ" },
    { "input": "3 2\n1 3\n2 3", "expected_output": "1 2 3", "description": "ë‘ ì„ ìˆ˜ ê³¼ëª©" }
  ],
  "hints": [
    "import heapq / ë²ˆí˜¸ ì‘ì€ ê²ƒ ìš°ì„ ì´ë©´ heap ì‚¬ìš©",
    "heap = [i for i in range(1, n+1) if in_degree[i] == 0]",
    "heapq.heapify(heap)",
    "êº¼ë‚¸ ë…¸ë“œì˜ ì´ì›ƒ in_degree -= 1, 0ì´ ë˜ë©´ heapì— ì¶”ê°€"
  ],
  "expected_approaches": [
    { "tag": "ì¹´í” ì•Œê³ ë¦¬ì¦˜ + ìš°ì„ ìˆœìœ„ í", "description": "ì§„ì…ì°¨ìˆ˜ 0ì¸ ë…¸ë“œë¥¼ heapqë¡œ ê´€ë¦¬, ìˆ«ì ìˆœ ì •ë ¬ ë³´ì¥" }
  ],
  "explanation": "## í’€ì´ í•´ì„¤\n\n### ìœ„ìƒ ì •ë ¬ (ì¹´í” ì•Œê³ ë¦¬ì¦˜) íë¦„ë„\n\n```mermaid\nflowchart TD\n    A[\"ëª¨ë“  ë…¸ë“œì˜\\nì§„ì…ì°¨ìˆ˜ ê³„ì‚°\"] --> B[\"ì§„ì…ì°¨ìˆ˜ 0ì¸ ë…¸ë“œë¥¼\\nìš°ì„ ìˆœìœ„ íì— ë„£ê¸°\"]\n    B --> C{\"íê°€ ë¹„ì–´ìˆë‚˜?\"}\n    C -->|\"ì•„ë‹ˆì˜¤\"| D[\"ê°€ì¥ ì‘ì€ ë²ˆí˜¸\\në…¸ë“œ êº¼ë‚´ê¸°\"]\n    C -->|\"ì˜ˆ\"| H{\"ê²°ê³¼ ê°œìˆ˜ == n?\"}\n    D --> E[\"ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€\"]\n    E --> F[\"ì´ì›ƒë“¤ì˜\\nì§„ì…ì°¨ìˆ˜ -1\"]\n    F --> G{\"ì§„ì…ì°¨ìˆ˜ê°€\\n0ì´ ëœ ì´ì›ƒ?\"}\n    G -->|\"ì˜ˆ\"| I[\"íì— ì¶”ê°€\"]\n    G -->|\"ì•„ë‹ˆì˜¤\"| C\n    I --> C\n    H -->|\"ì˜ˆ\"| J[\"ìˆœì„œ ì¶œë ¥\"]\n    H -->|\"ì•„ë‹ˆì˜¤\"| K[\"CYCLE ì¶œë ¥\\n(ì‚¬ì´í´ ì¡´ì¬!)\"]\n```\n\n```python\nimport heapq\nfrom collections import deque\n\nn, m = map(int, input().split())\ngraph = [[] for _ in range(n+1)]\nin_degree = [0] * (n+1)\n\nfor _ in range(m):\n    a, b = map(int, input().split())\n    graph[a].append(b)\n    in_degree[b] += 1\n\n# ì§„ì…ì°¨ìˆ˜ 0ì¸ ë…¸ë“œë¥¼ ìš°ì„ ìˆœìœ„ íì— ë„£ê¸°\nheap = [i for i in range(1, n+1) if in_degree[i] == 0]\nheapq.heapify(heap)\n\nresult = []\nwhile heap:\n    node = heapq.heappop(heap)  # ê°€ì¥ ì‘ì€ ë²ˆí˜¸\n    result.append(node)\n    for neighbor in graph[node]:\n        in_degree[neighbor] -= 1\n        if in_degree[neighbor] == 0:\n            heapq.heappush(heap, neighbor)\n\nif len(result) == n:\n    print(*result)\nelse:\n    print('CYCLE')  # ì²˜ë¦¬ ëª»í•œ ë…¸ë“œ ìˆìŒ = ì‚¬ì´í´\n```\n\n**ì‚¬ì´í´ ê°ì§€**: ìœ„ìƒ ì •ë ¬ ì™„ë£Œ í›„ ê²°ê³¼ ê°œìˆ˜ê°€ në³´ë‹¤ ì‘ìœ¼ë©´ ì‚¬ì´í´!\nì‚¬ì´í´ì´ ìˆìœ¼ë©´ ì§„ì…ì°¨ìˆ˜ê°€ ì˜ì›íˆ 0ì´ ë˜ì§€ ì•ŠëŠ” ë…¸ë“œê°€ ìƒê²¨ìš”.\n\n**ìœ„ìƒ ì •ë ¬ì˜ í™œìš©**:\n- ë¹Œë“œ ì‹œìŠ¤í…œ (Makefile, npm ì˜ì¡´ì„±)\n- ëŒ€í•™ ìˆ˜ê°• ê³„íš\n- ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ìˆœì„œ\n- ì‘ì—… ìŠ¤ì¼€ì¤„ë§"
}
