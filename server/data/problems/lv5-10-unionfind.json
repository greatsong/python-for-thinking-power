{
  "id": "lv5-10-unionfind",
  "title": "ì¹œêµ¬ ê·¸ë£¹ ë¬¶ê¸° (ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ)",
  "difficulty": 5,
  "category": "data-structure",
  "description": "## ğŸ¤ ê°™ì€ ê·¸ë£¹ì¸ê°€ìš”? (Union-Find)\n\nì—¬ëŸ¬ ëª…ì´ ìˆì„ ë•Œ \"ì¹œêµ¬ ê´€ê³„\"ë¡œ ê°™ì€ ê·¸ë£¹ì„ ë¹ ë¥´ê²Œ ê´€ë¦¬í•´ìš”.\n\n```\nì´ˆê¸°: ê°ì ìì‹ ì˜ ê·¸ë£¹\n1 2 3 4 5\n\n1-2 í•©ì¹˜ê¸°: {1,2} {3} {4} {5}\n3-4 í•©ì¹˜ê¸°: {1,2} {3,4} {5}\n2-3 í•©ì¹˜ê¸°: {1,2,3,4} {5}\n\nì§ˆë¬¸: 1ê³¼ 4ëŠ” ê°™ì€ ê·¸ë£¹? â†’ YES\nì§ˆë¬¸: 1ê³¼ 5ëŠ” ê°™ì€ ê·¸ë£¹? â†’ NO\n```\n\n### Union-Find (ì„œë¡œì†Œ ì§‘í•©)\n- `find(x)`: xê°€ ì†í•œ ê·¸ë£¹ì˜ ëŒ€í‘œì ì°¾ê¸°\n- `union(x, y)`: xì™€ yê°€ ì†í•œ ê·¸ë£¹ì„ í•©ì¹˜ê¸°\n\n**ê²½ë¡œ ì••ì¶•**: findí•  ë•Œ ë£¨íŠ¸ë¥¼ ì§ì ‘ ì—°ê²° â†’ ë‹¤ìŒ findê°€ O(1)!\n\n---\n\n## ë¬¸ì œ\n\nnëª…ì˜ í•™ìƒê³¼ ì—°ê²° ì •ë³´, ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ì„¸ìš”.\n- `U x y`: xì™€ yë¥¼ ê°™ì€ ê·¸ë£¹ìœ¼ë¡œ í•©ì¹˜ê¸°\n- `Q x y`: xì™€ yê°€ ê°™ì€ ê·¸ë£¹ì´ë©´ YES, ì•„ë‹ˆë©´ NO\n\n### ì…ë ¥\n- ì²«ì§¸ ì¤„: n (í•™ìƒ ìˆ˜)\n- ë‘˜ì§¸ ì¤„: ì¿¼ë¦¬ ìˆ˜ q\n- ì´í›„ qì¤„: U x y ë˜ëŠ” Q x y\n\n### ì˜ˆì‹œ\n```\nì…ë ¥:\n5\n5\nU 1 2\nU 3 4\nU 2 3\nQ 1 4\nQ 1 5\nì¶œë ¥:\nYES\nNO\n```",
  "starter_code": "n = int(input())\nq = int(input())\n\n# parent ë°°ì—´ ì´ˆê¸°í™”: ê°ì ìì‹ ì´ ëŒ€í‘œ\nparent = list(range(n+1))\n\n# Union-Find í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì„¸ìš”\n",
  "test_cases": [
    { "input": "5\n5\nU 1 2\nU 3 4\nU 2 3\nQ 1 4\nQ 1 5", "expected_output": "YES\nNO", "description": "ê¸°ë³¸ Union-Find" },
    { "input": "3\n3\nU 1 2\nQ 1 3\nQ 1 2", "expected_output": "NO\nYES", "description": "ë‹¨ìˆœ ì¼€ì´ìŠ¤" }
  ],
  "hints": [
    "def find(x): if parent[x]!=x: parent[x]=find(parent[x]); return parent[x]",
    "ê²½ë¡œ ì••ì¶•: parent[x] = find(parent[x]) (ë£¨íŠ¸ì— ì§ì ‘ ì—°ê²°)",
    "def union(x, y): parent[find(x)] = find(y)"
  ],
  "expected_approaches": [
    { "tag": "Union-Find + ê²½ë¡œ ì••ì¶•", "description": "findì—ì„œ ê²½ë¡œ ì••ì¶•, unionì—ì„œ ëŒ€í‘œìë¼ë¦¬ ì—°ê²°" }
  ],
  "explanation": "## í’€ì´ í•´ì„¤\n\n### Union-Find ì—°ì‚° íë¦„ë„\n\n```mermaid\nflowchart TD\n    subgraph FIND[\"find(x) â€” ê²½ë¡œ ì••ì¶•\"]\n        F1[\"find(x) í˜¸ì¶œ\"] --> F2{\"parent[x] == x?\"}\n        F2 -->|\"Yes\"| F3[\"xê°€ ë£¨íŠ¸!\\nreturn x\"]\n        F2 -->|\"No\"| F4[\"parent[x] = find(parent[x])\\nê²½ë¡œ ì••ì¶•!\"]\n        F4 --> F5[\"return parent[x]\"]\n    end\n    subgraph UNION[\"union(a, b) â€” ê·¸ë£¹ í•©ì¹˜ê¸°\"]\n        U1[\"pa = find(a)\\npb = find(b)\"] --> U2{\"pa == pb?\"}\n        U2 -->|\"Yes\"| U3[\"ì´ë¯¸ ê°™ì€ ê·¸ë£¹\\nì•„ë¬´ê²ƒë„ ì•ˆ í•¨\"]\n        U2 -->|\"No\"| U4[\"parent[pa] = pb\\nê·¸ë£¹ í•©ì¹˜ê¸°!\"]\n    end\n    subgraph CHECK[\"ì—°ê²° í™•ì¸\"]\n        C1[\"Q x y ì¿¼ë¦¬\"] --> C2[\"find(x) == find(y)?\"]\n        C2 --> C3{\"ê°™ì€ ë£¨íŠ¸?\"}\n        C3 -->|\"Yes\"| C4[\"YES ì¶œë ¥\"]\n        C3 -->|\"No\"| C5[\"NO ì¶œë ¥\"]\n    end\n    style F4 fill:#FFD700\n    style U4 fill:#90EE90\n    style C4 fill:#87CEEB\n```\n\n- **ë…¸ë€ ë°•ìŠ¤**: ê²½ë¡œ ì••ì¶• â€” ë£¨íŠ¸ë¥¼ ì§ì ‘ ê°€ë¦¬í‚¤ê²Œ í•˜ì—¬ ë‹¤ìŒ findë¥¼ O(1)ë¡œ!\n- **ì´ˆë¡ ë°•ìŠ¤**: ê·¸ë£¹ í•©ì¹˜ê¸° â€” í•œìª½ ë£¨íŠ¸ë¥¼ ë‹¤ë¥¸ ìª½ì— ì—°ê²°\n- **íŒŒë€ ë°•ìŠ¤**: ì—°ê²° í™•ì¸ â€” ë£¨íŠ¸ê°€ ê°™ìœ¼ë©´ ê°™ì€ ê·¸ë£¹\n\n```python\nn = int(input())\nq = int(input())\n\nparent = list(range(n+1))  # ì´ˆê¸°: ìì‹ ì´ ëŒ€í‘œ\n\ndef find(x):\n    if parent[x] != x:\n        parent[x] = find(parent[x])  # ê²½ë¡œ ì••ì¶•!\n    return parent[x]\n\ndef union(x, y):\n    px, py = find(x), find(y)\n    if px != py:\n        parent[px] = py  # x ê·¸ë£¹ì„ y ê·¸ë£¹ì— í•©ì¹˜ê¸°\n\nfor _ in range(q):\n    op, x, y = input().split()\n    x, y = int(x), int(y)\n    if op == 'U':\n        union(x, y)\n    else:  # Q\n        print('YES' if find(x) == find(y) else 'NO')\n```\n\n**ê²½ë¡œ ì••ì¶•ì˜ ë§ˆë²•**:\n\nì••ì¶• ì „:\n```\n1 â†’ 2 â†’ 3 â†’ 4  (ë£¨íŠ¸ ì°¾ìœ¼ë ¤ë©´ 3ë²ˆ ì´ë™)\n```\n\n`find(1)` í˜¸ì¶œ í›„ ê²½ë¡œ ì••ì¶•:\n```\n1 â†’ 4\n2 â†’ 4\n3 â†’ 4  (ë‹¤ìŒë¶€í„° O(1)!)\n```\n\n**Union by Rank** (ë” ìµœì í™”):\në‘ íŠ¸ë¦¬ë¥¼ í•©ì¹  ë•Œ ì‘ì€ íŠ¸ë¦¬ë¥¼ í° íŠ¸ë¦¬ì— ë¶™ì´ë©´\níŠ¸ë¦¬ ë†’ì´ë¥¼ O(log n)ìœ¼ë¡œ ìœ ì§€ ê°€ëŠ¥í•´ìš”.\n\n**í™œìš© ë¶„ì•¼**: ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸, ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬(í¬ë£¨ìŠ¤ì¹¼), ì‚¬ì´í´ ê°ì§€"
}
