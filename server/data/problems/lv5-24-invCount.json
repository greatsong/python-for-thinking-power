{
  "id": "lv5-24-invCount",
  "title": "ì—­ì „ ìŒ ì„¸ê¸°",
  "difficulty": 5,
  "category": "algorithm",
  "description": "## ğŸ”„ ì—­ì „ ìŒ ì„¸ê¸°\n\n1ë¶€í„° Nê¹Œì§€ì˜ ìˆ˜ê°€ í•œ ë²ˆì”© ë‚˜ì˜¤ëŠ” ìˆ˜ì—´(ìˆœì—´)ì´ ìˆì–´ìš”.\n**ì—­ì „ ìŒ**ì´ë€, ì•ì— ìˆëŠ” ìˆ˜ê°€ ë’¤ì— ìˆëŠ” ìˆ˜ë³´ë‹¤ í° ê²½ìš°ì˜ˆìš”.\n\n> i < jì¸ë° arr[i] > arr[j]ì¸ ìŒ (i, j)ì˜ ê°œìˆ˜\n\n```\nìˆ˜ì—´: [3, 1, 2, 5, 4]\n\n(3,1) â†’ 3 > 1 âœ… ì—­ì „!\n(3,2) â†’ 3 > 2 âœ… ì—­ì „!\n(5,4) â†’ 5 > 4 âœ… ì—­ì „!\në‚˜ë¨¸ì§€ëŠ” ì• â‰¤ ë’¤ì´ë¯€ë¡œ ì—­ì „ ì•„ë‹˜\n\nâ†’ ì—­ì „ ìŒ = 3ê°œ\n```\n\nì—­ì „ ìŒì˜ ìˆ˜ëŠ” **ë°°ì—´ì´ ì–¼ë§ˆë‚˜ \"ë’¤ì„ì—¬ ìˆëŠ”ì§€\"ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì²™ë„**ì˜ˆìš”.\n- ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬: ì—­ì „ ìŒ = 0 (ì™„ì „ ì •ë ¬)\n- ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬: ì—­ì „ ìŒ = N(N-1)/2 (ìµœëŒ€)\n\n---\n\n### ì œí•œ\n- 1 â‰¤ N â‰¤ 100,000\n- ìˆ˜ì—´ì€ 1ë¶€í„° Nê¹Œì§€ì˜ ìˆœì—´\n\n### ì…ë ¥\n- ì²«ì§¸ ì¤„: N\n- ë‘˜ì§¸ ì¤„: 1~Nì˜ ìˆœì—´ (ê³µë°± êµ¬ë¶„)\n\n### ì¶œë ¥\n- ì—­ì „ ìŒì˜ ê°œìˆ˜\n\n### ì˜ˆì‹œ 1\n```\nì…ë ¥:\n5\n3 1 2 5 4\nì¶œë ¥: 3\n```\n\n### ì˜ˆì‹œ 2\n```\nì…ë ¥:\n4\n4 3 2 1\nì¶œë ¥: 6\n```\n> ì™„ì „ ì—­ìˆœì´ë©´ ëª¨ë“  ìŒì´ ì—­ì „: C(4,2) = 6\n\n### ìƒê°í•´ ë³¼ ì  ğŸ’¡\n\nëª¨ë“  ìŒì„ ë¹„êµí•˜ë©´ O(NÂ²)ì´ì—ìš”.\ní•˜ì§€ë§Œ **ë¨¸ì§€ ì†ŒíŠ¸(ë³‘í•© ì •ë ¬)ë¥¼ í•˜ë©´ì„œ** ì—­ì „ ìŒì„ ì„¸ëŠ” ì²œì¬ì ì¸ ë°©ë²•ì´ ìˆì–´ìš”!\në¶„í•  ì •ë³µì˜ merge ê³¼ì •ì—ì„œ ì™¼ìª½ì´ ì˜¤ë¥¸ìª½ë³´ë‹¤ í¬ë©´ â†’ ì—­ì „!",
  "starter_code": "N = int(input())\narr = list(map(int, input().split()))\n\n# ì—­ì „ ìŒì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ì„¸ìš”\n",
  "test_cases": [
    { "input": "5\n3 1 2 5 4", "expected_output": "3", "description": "(3,1), (3,2), (5,4)" },
    { "input": "4\n4 3 2 1", "expected_output": "6", "description": "ì™„ì „ ì—­ìˆœ â†’ C(4,2)=6" },
    { "input": "3\n1 2 3", "expected_output": "0", "description": "ì´ë¯¸ ì •ë ¬ â†’ ì—­ì „ ì—†ìŒ" },
    { "input": "6\n6 5 4 3 2 1", "expected_output": "15", "description": "ì—­ìˆœ â†’ C(6,2)=15" },
    { "input": "20\n20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1", "expected_output": "190", "description": "í° ì…ë ¥ ì—­ìˆœ â†’ C(20,2)=190" }
  ],
  "hints": [
    "ê°€ì¥ ë‹¨ìˆœí•œ ë°©ë²•: ì´ì¤‘ forë¬¸ìœ¼ë¡œ ëª¨ë“  ìŒ (i,j)ì—ì„œ arr[i] > arr[j]ì¸ ê²ƒì„ ì„¸ë©´?",
    "ë¨¸ì§€ ì†ŒíŠ¸(ë³‘í•© ì •ë ¬)ë¥¼ ë– ì˜¬ë ¤ë´ìš”. ë‘ ì •ë ¬ëœ ë°°ì—´ì„ í•©ì¹  ë•Œ, ì™¼ìª½ ì›ì†Œê°€ ì˜¤ë¥¸ìª½ë³´ë‹¤ í¬ë©´ ì—­ì „ì´ì—ìš”!",
    "merge ì‹œ left[i] > right[j]ì´ë©´, left[i:]ì˜ ëª¨ë“  ì›ì†Œê°€ right[j]ë³´ë‹¤ í¬ë¯€ë¡œ â†’ count += len(left) - i"
  ],
  "expected_approaches": [
    { "tag": "ì™„ì „ íƒìƒ‰ O(NÂ²)", "description": "ì´ì¤‘ forë¬¸ìœ¼ë¡œ ëª¨ë“  ìŒì„ ë¹„êµí•˜ì—¬ ì—­ì „ ì—¬ë¶€ í™•ì¸" },
    { "tag": "ë¨¸ì§€ ì†ŒíŠ¸ ë³€í˜• O(N log N)", "description": "ë¶„í•  ì •ë³µ + merge ê³¼ì •ì—ì„œ ì—­ì „ ìŒì„ ì¹´ìš´íŠ¸ â€” ì™¼ìª½ì´ í¬ë©´ ë‚˜ë¨¸ì§€ ì „ë¶€ ì—­ì „" },
    { "tag": "íœìœ… íŠ¸ë¦¬(BIT) O(N log N)", "description": "ì˜¤ë¥¸ìª½ë¶€í„° ì²˜ë¦¬í•˜ë©°, í˜„ì¬ ê°’ë³´ë‹¤ ì‘ì€ ìˆ˜ê°€ ì´ë¯¸ ëª‡ ê°œ ë“±ì¥í–ˆëŠ”ì§€ë¥¼ BITë¡œ ê´€ë¦¬" }
  ],
  "explanation": "## í’€ì´ í•´ì„¤\n\n### ì ‘ê·¼ë²• 1: ì™„ì „ íƒìƒ‰ O(NÂ²)\n\nëª¨ë“  ìŒì„ í•˜ë‚˜í•˜ë‚˜ ë¹„êµí•´ìš”.\n\n```python\nN = int(input())\narr = list(map(int, input().split()))\n\ncount = 0\nfor i in range(N):\n    for j in range(i + 1, N):\n        if arr[i] > arr[j]:\n            count += 1\n\nprint(count)\n```\n\n> í™•ì‹¤í•˜ì§€ë§Œ, N=100,000ì´ë©´ 50ì–µ ë²ˆ ë¹„êµ â†’ ë§¤ìš° ëŠë¦¼!\n\n---\n\n### ì ‘ê·¼ë²• 2: ë¨¸ì§€ ì†ŒíŠ¸ ë³€í˜• O(N log N)\n\n**í•µì‹¬ ì•„ì´ë””ì–´**: ë¨¸ì§€ ì†ŒíŠ¸ì˜ merge ê³¼ì •ì—ì„œ ì—­ì „ ìŒì„ ìì—°ìŠ¤ëŸ½ê²Œ ì…€ ìˆ˜ ìˆì–´ìš”!\n\në‘ ì •ë ¬ëœ ë°°ì—´ì„ í•©ì¹  ë•Œ:\n- `left[i] â‰¤ right[j]` â†’ ì •ìƒ ìˆœì„œ, ì—­ì „ ì•„ë‹˜\n- `left[i] > right[j]` â†’ **left[i] ì´í›„ ì „ë¶€ê°€ right[j]ë³´ë‹¤ í¼** â†’ ì—­ì „ ìŒ = `len(left) - i`ê°œ!\n\n```python\nN = int(input())\narr = list(map(int, input().split()))\n\ndef merge_count(arr):\n    if len(arr) <= 1:\n        return arr, 0\n    \n    mid = len(arr) // 2\n    left, left_inv = merge_count(arr[:mid])    # ì™¼ìª½ ì ˆë°˜\n    right, right_inv = merge_count(arr[mid:])  # ì˜¤ë¥¸ìª½ ì ˆë°˜\n    \n    # mergeí•˜ë©´ì„œ ì—­ì „ ìŒ ì„¸ê¸°\n    merged = []\n    inversions = left_inv + right_inv\n    i = j = 0\n    \n    while i < len(left) and j < len(right):\n        if left[i] <= right[j]:\n            merged.append(left[i])\n            i += 1\n        else:\n            merged.append(right[j])\n            inversions += len(left) - i  # í•µì‹¬!\n            j += 1\n    \n    merged.extend(left[i:])\n    merged.extend(right[j:])\n    \n    return merged, inversions\n\n_, result = merge_count(arr)\nprint(result)\n```\n\n> **ì™œ ì´ê²Œ ë˜ë‚˜ìš”?**\n>\n> merge ì‹œ ì™¼ìª½ ë°°ì—´ì˜ ì›ì†ŒëŠ” **ì›ë˜ ìˆ˜ì—´ì—ì„œ ë” ì•**ì— ìˆì—ˆì–´ìš”.\n> `left[i] > right[j]`ì´ë©´, left[i]ë¶€í„° ëê¹Œì§€ ëª¨ë“  ì›ì†Œê°€\n> right[j]ë³´ë‹¤ í¬ê³ , ì›ë˜ ì•ì— ìˆì—ˆìœ¼ë¯€ë¡œ â†’ ì „ë¶€ ì—­ì „ ìŒ!\n>\n> ```\n> ì˜ˆ: left=[3, 5], right=[1, 4]\n> i=0, j=0: left[0]=3 > right[0]=1 â†’ inv += 2 (3>1, 5>1)\n> i=0, j=1: left[0]=3 â‰¤ right[1]=4 â†’ ì •ìƒ\n> i=1, j=1: left[1]=5 > right[1]=4 â†’ inv += 1 (5>4)\n> ì´ ì—­ì „ = 3\n> ```\n\n---\n\n### ì ‘ê·¼ë²• 3: íœìœ… íŠ¸ë¦¬(BIT) O(N log N)\n\n**í•µì‹¬ ì•„ì´ë””ì–´**: ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ì„œ,\n\"ë‚˜ë³´ë‹¤ ì˜¤ë¥¸ìª½ì— ìˆìœ¼ë©´ì„œ ë‚˜ë³´ë‹¤ ì‘ì€ ìˆ˜ì˜ ê°œìˆ˜\"ë¥¼ BITë¡œ ë¹ ë¥´ê²Œ ì„¸ìš”.\n\n```python\nN = int(input())\narr = list(map(int, input().split()))\n\n# íœìœ… íŠ¸ë¦¬ (Binary Indexed Tree)\ntree = [0] * (N + 1)\n\ndef update(i):\n    while i <= N:\n        tree[i] += 1\n        i += i & (-i)  # ìµœí•˜ìœ„ ë¹„íŠ¸ ë”í•˜ê¸°\n\ndef query(i):\n    s = 0\n    while i > 0:\n        s += tree[i]\n        i -= i & (-i)  # ìµœí•˜ìœ„ ë¹„íŠ¸ ë¹¼ê¸°\n    return s\n\ncount = 0\nfor i in range(N - 1, -1, -1):  # ì˜¤ë¥¸ìª½ë¶€í„°!\n    count += query(arr[i] - 1)  # arr[i]ë³´ë‹¤ ì‘ì€ ìˆ˜ ì¤‘ ì´ë¯¸ ë“±ì¥í•œ ê°œìˆ˜\n    update(arr[i])               # arr[i] ë“±ì¥ ê¸°ë¡\n\nprint(count)\n```\n\n> **ì™œ ì´ê²Œ ë˜ë‚˜ìš”?**\n>\n> ì˜¤ë¥¸ìª½ë¶€í„° ì²˜ë¦¬í•˜ë‹ˆê¹Œ, BITì— ë“¤ì–´ìˆëŠ” ìˆ˜ëŠ” \"ë‚˜ë³´ë‹¤ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ìˆ˜\"ì˜ˆìš”.\n> `query(arr[i] - 1)` = \"ì˜¤ë¥¸ìª½ì— ìˆìœ¼ë©´ì„œ arr[i]ë³´ë‹¤ ì‘ì€ ìˆ˜ì˜ ê°œìˆ˜\" = ì—­ì „ ìŒ ìˆ˜!\n>\n> íœìœ… íŠ¸ë¦¬ëŠ” **êµ¬ê°„ í•© ì§ˆì˜ì™€ í¬ì¸íŠ¸ ê°±ì‹ ì„ O(log N)ì—** ì²˜ë¦¬í•˜ëŠ” ìë£Œêµ¬ì¡°ì˜ˆìš”.\n\n---\n\n### ë¹„êµ í¬ì¸íŠ¸ ğŸ”\n\n| | ì™„ì „ íƒìƒ‰ | ë¨¸ì§€ ì†ŒíŠ¸ | íœìœ… íŠ¸ë¦¬ |\n|---|---|---|---|\n| ì‹œê°„ | O(NÂ²) | **O(N log N)** | **O(N log N)** |\n| ê³µê°„ | O(1) | O(N) ì„ì‹œ ë°°ì—´ | O(N) íŠ¸ë¦¬ |\n| í•µì‹¬ ì•„ì´ë””ì–´ | ëª¨ë“  ìŒ ë¹„êµ | **ë¶„í•  ì •ë³µ + mergeì—ì„œ ì„¸ê¸°** | **BITë¡œ ë¹ˆë„ ê´€ë¦¬** |\n| ì½”ë”© ë‚œì´ë„ | ì‰¬ì›€ | ì¤‘ê°„ | ë†’ìŒ |\n| N=100,000 | ~30ì´ˆ | **~0.1ì´ˆ** | **~0.08ì´ˆ** |\n\n### ë¨¸ì§€ ì†ŒíŠ¸ ë°©ë²•ì´ ì•„ë¦„ë‹¤ìš´ ì´ìœ \n\n\"ì •ë ¬í•˜ë©´ì„œ ë™ì‹œì— ì—­ì „ ìŒì„ ì„¼ë‹¤\" â€” **í•œ ë²ˆì˜ ì‘ì—…ìœ¼ë¡œ ë‘ ê°€ì§€ë¥¼ í•´ê²°!**\n\n```mermaid\nflowchart TD\n    A[\"[3, 1, 2, 5, 4]\"] --> B[\"[3, 1, 2]\"]\n    A --> C[\"[5, 4]\"]\n    B --> D[\"[3]\"]\n    B --> E[\"[1, 2]\"]\n    E --> F[\"[1]\"]\n    E --> G[\"[2]\"]\n    F --> H[\"merge [1,2] inv=0\"]\n    G --> H\n    D --> I[\"merge [1,2,3] inv=2\"]\n    H --> I\n    C --> J[\"[5]\"]\n    C --> K[\"[4]\"]\n    J --> L[\"merge [4,5] inv=1\"]\n    K --> L\n    I --> M[\"merge [1,2,3,4,5] inv=0\"]\n    L --> M\n    M --> N[\"ì´ ì—­ì „ = 2+1+0 = 3\"]\n```\n\në¶„í•  ì •ë³µì€ \"í° ë¬¸ì œë¥¼ ì‘ì€ ë¬¸ì œë¡œ ìª¼ê°œê³ , í•©ì¹˜ë©´ì„œ ë‹µì„ êµ¬í•˜ëŠ”\" ê°•ë ¥í•œ íŒ¨ëŸ¬ë‹¤ì„ì´ì—ìš”!"
}
